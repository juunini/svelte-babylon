import{p as tt,s as st,r as et,i as nt,a as at,t as it}from"./props-Biv-wkS8.js";import{p as ot,a as rt,f as ct,n as ut,b as Q}from"./index-client-rkuF54Lr.js";import{M as J,f as K,V as v,c as G,q as lt,k as pt,l as dt,m as ht,n as mt,o as yt,p as ft,F as bt,H as vt}from"./create-runtime-stories-BkZzGcfe.js";import"./iframe-B3Qvg23w.js";import"../sb-preview/runtime.js";import"./index-D-8MO0q_.js";import"./index-BHYIh-Xd.js";import"./_commonjsHelpers-Cpj98o6Y.js";function N(t={subdivisions:2,tessellation:16,height:1,radius:.25,capSubdivisions:6}){const l=Math.max(t.subdivisions?t.subdivisions:2,1)|0,y=Math.max(t.tessellation?t.tessellation:16,3)|0,h=Math.max(t.height?t.height:1,0),m=Math.max(t.radius?t.radius:.25,0),B=Math.max(t.capSubdivisions?t.capSubdivisions:6,1)|0,x=y,C=l,o=Math.max(t.radiusTop?t.radiusTop:m,0),r=Math.max(t.radiusBottom?t.radiusBottom:m,0),Z=h-(o+r),S=0,k=2*Math.PI,_=Math.max(t.topCapSubdivisions?t.topCapSubdivisions:B,1),$=Math.max(t.bottomCapSubdivisions?t.bottomCapSubdivisions:B,1),f=Math.acos((r-o)/h);let b=[];const p=[],H=[],I=[];let z=0;const w=[],D=Z*.5,F=Math.PI*.5;let n,e;const u=v.Zero(),a=v.Zero(),V=Math.cos(f),E=Math.sin(f),q=new G(o*E,D+o*V).subtract(new G(r*E,-D+r*V)).length(),L=o*f+q+r*(F-f);let T=0;for(e=0;e<=_;e++){const c=[],i=F-f*(e/_);T+=o*f/_;const s=Math.cos(i),d=Math.sin(i),g=s*o;for(n=0;n<=x;n++){const M=n/x,P=M*k+S,j=Math.sin(P),R=Math.cos(P);a.x=g*j,a.y=D+d*o,a.z=g*R,p.push(a.x,a.y,a.z),u.set(s*j,d,s*R),H.push(u.x,u.y,u.z),I.push(M,1-T/L),c.push(z),z++}w.push(c)}const O=h-o-r+V*o-V*r,Y=E*(r-o)/O;for(e=1;e<=C;e++){const c=[];T+=q/C;const i=E*(e*(r-o)/C+o);for(n=0;n<=x;n++){const s=n/x,d=s*k+S,g=Math.sin(d),M=Math.cos(d);a.x=i*g,a.y=D+V*o-e*O/C,a.z=i*M,p.push(a.x,a.y,a.z),u.set(g,Y,M).normalize(),H.push(u.x,u.y,u.z),I.push(s,1-T/L),c.push(z),z++}w.push(c)}for(e=1;e<=$;e++){const c=[],i=F-f-(Math.PI-f)*(e/$);T+=r*f/$;const s=Math.cos(i),d=Math.sin(i),g=s*r;for(n=0;n<=x;n++){const M=n/x,P=M*k+S,j=Math.sin(P),R=Math.cos(P);a.x=g*j,a.y=-D+d*r,a.z=g*R,p.push(a.x,a.y,a.z),u.set(s*j,d,s*R),H.push(u.x,u.y,u.z),I.push(M,1-T/L),c.push(z),z++}w.push(c)}for(n=0;n<x;n++)for(e=0;e<_+C+$;e++){const c=w[e][n],i=w[e+1][n],s=w[e+1][n+1],d=w[e][n+1];b.push(c),b.push(i),b.push(d),b.push(i),b.push(s),b.push(d)}if(b=b.reverse(),t.orientation&&!t.orientation.equals(v.Up())){const c=new lt;t.orientation.clone().scale(Math.PI*.5).cross(v.Up()).toQuaternion().toRotationMatrix(c);const i=v.Zero();for(let s=0;s<p.length;s+=3)i.set(p[s],p[s+1],p[s+2]),v.TransformCoordinatesToRef(i.clone(),c,i),p[s]=i.x,p[s+1]=i.y,p[s+2]=i.z}const A=new K;return A.positions=p,A.normals=H,A.uvs=I,A.indices=b,A}function W(t,l={orientation:v.Up(),subdivisions:2,tessellation:16,height:1,radius:.25,capSubdivisions:6,updatable:!1},y=null){const h=new J(t,y);return N(l).applyToMesh(h,l.updatable),h}J.CreateCapsule=(t,l,y)=>W(t,l,y);K.CreateCapsule=N;function U(t,l){let y=tt(l,"mesh",15),h=et(l,["$$slots","$$events","$$legacy","mesh"]);pt(t,st({createMeshFunction:W},()=>h,{get mesh(){return y()},set mesh(m){y(m)}}))}U.__docgen={data:[{name:"options",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"object",text:"ICreateCapsuleOptions"},static:!1,readonly:!1},{name:"scene",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"object",text:"Scene"},static:!1,readonly:!1},{name:"mesh",visibility:"public",description:"if you want to use a mesh api, bind it",keywords:[],kind:"let",type:{kind:"type",type:"object",text:"Mesh"},static:!1,readonly:!1,defaultValue:"..."},{name:"position",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"object",text:"{ x: number; y: number; z: number; }"},static:!1,readonly:!1},{name:"rotation",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"object",text:"{ x: number; y: number; z: number; }"},static:!1,readonly:!1},{name:"scaling",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"object",text:"{ x: number; y: number; z: number; }"},static:!1,readonly:!1}],name:"Capsule.svelte"};const xt={title:"mesh/Capsule",tags:["autodocs"],component:U},{Story:gt}=ht();var Mt=it("<!> <!> <!>",1);function X(t,l){ot(l,!1),nt(),gt(t,{name:"Docs",args:{options:{orientation:void 0,subdivisions:void 0,tessellation:void 0,height:4,radius:1,capSubdivisions:void 0,radiusTop:void 0,radiusBottom:void 0,topCapSubdivisions:void 0,bottomCapSubdivisions:void 0,updatable:void 0},position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scaling:{x:1,y:1,z:1}},children:(h,m=ut)=>{mt(h,{style:"width: 100%;",children:(B,x)=>{yt(B,{children:(C,o)=>{ft(C,{children:(r,Z)=>{var S=Mt(),k=ct(S);bt(k,{position:new v(0,5,-10)});var _=Q(k,2);vt(_,{direction:new v(0,1,0),intensity:.7});var $=Q(_,2);U($,{get options(){return m().options},get position(){return m().position},get rotation(){return m().rotation},get scaling(){return m().scaling}}),at(r,S)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0},parameters:{__svelteCsf:{rawCode:`<Canvas style="width: 100%;">
  <Engine>
    <Scene>
      <FreeCamera position={new Vector3(0, 5, -10)} />
      <HemisphericLight direction={new Vector3(0, 1, 0)} intensity={0.7} />
      <Capsule
        options={args.options}
        position={args.position}
        rotation={args.rotation}
        scaling={args.scaling}
      />
    </Scene>
  </Engine>
</Canvas>`}}}),rt()}X.__docgen={version:3,name:"Capsule.stories.svelte",data:[],computed:[],methods:[],components:[],description:null,keywords:[],events:[],slots:[],refs:[]};const Ct=dt(X,xt),Vt=["Docs"],At=Ct.Docs;export{At as Docs,Vt as __namedExportsOrder,xt as default};
