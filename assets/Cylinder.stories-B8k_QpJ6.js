import{p as ye,s as me,r as he,i as be,a as ge,t as xe}from"./props-Biv-wkS8.js";import{p as Ce,a as we,f as ve,n as ze,b as re}from"./index-client-rkuF54Lr.js";import{f as I,M,r as _e,j as ke,d as Ve,V as k,A as $e,c as ae,k as Se,l as De,m as Ae,n as Me,o as Fe,p as Le,F as Pe,H as Ue}from"./create-runtime-stories-BkZzGcfe.js";import"./iframe-B3Qvg23w.js";import"../sb-preview/runtime.js";import"./index-D-8MO0q_.js";import"./index-BHYIh-Xd.js";import"./_commonjsHelpers-Cpj98o6Y.js";function oe(n){const r=n.height||2;let u=n.diameterTop===0?0:n.diameterTop||n.diameter||1,a=n.diameterBottom===0?0:n.diameterBottom||n.diameter||1;u=u||1e-5,a=a||1e-5;const i=(n.tessellation||24)|0,h=(n.subdivisions||1)|0,d=!!n.hasRings,x=!!n.enclose,F=n.cap===0?0:n.cap||M.CAP_ALL,S=n.arc&&(n.arc<=0||n.arc>1)?1:n.arc||1,J=n.sideOrientation===0?0:n.sideOrientation||I.DEFAULTSIDE,s=n.faceUV||new Array(3),t=n.faceColors,N=S!==1&&x?2:0,Z=d?h:1,R=2+(1+N)*Z;let V;for(V=0;V<R;V++)t&&t[V]===void 0&&(t[V]=new ke(1,1,1,1));for(V=0;V<R;V++)s&&s[V]===void 0&&(s[V]=new Ve(0,0,1,1));const f=[],$=[],y=[],D=[],L=[],ce=Math.PI*2*S/i;let q,P,H;const ue=(a-u)/2/r,p=k.Zero(),o=k.Zero(),B=k.Zero(),K=k.Zero(),l=k.Zero(),Q=$e.Y;let c,m,O,W=1,e=1,j=0,C=0;for(c=0;c<=h;c++)for(P=c/h,H=(P*(u-a)+a)/2,W=d&&c!==0&&c!==h?2:1,O=0;O<W;O++){for(d&&(e+=O),x&&(e+=2*O),m=0;m<=i;m++)q=m*ce,p.x=Math.cos(-q)*H,p.y=-r/2+P*r,p.z=Math.sin(-q)*H,u===0&&c===h?(o.x=y[y.length-(i+1)*3],o.y=y[y.length-(i+1)*3+1],o.z=y[y.length-(i+1)*3+2]):(o.x=p.x,o.z=p.z,o.y=Math.sqrt(o.x*o.x+o.z*o.z)*ue,o.normalize()),m===0&&(B.copyFrom(p),K.copyFrom(o)),$.push(p.x,p.y,p.z),y.push(o.x,o.y,o.z),d?C=j!==e?s[e].y:s[e].w:C=s[e].y+(s[e].w-s[e].y)*P,D.push(s[e].x+(s[e].z-s[e].x)*m/i,C),t&&L.push(t[e].r,t[e].g,t[e].b,t[e].a);S!==1&&x&&($.push(p.x,p.y,p.z),$.push(0,p.y,0),$.push(0,p.y,0),$.push(B.x,B.y,B.z),k.CrossToRef(Q,o,l),l.normalize(),y.push(l.x,l.y,l.z,l.x,l.y,l.z),k.CrossToRef(K,Q,l),l.normalize(),y.push(l.x,l.y,l.z,l.x,l.y,l.z),d?C=j!==e?s[e+1].y:s[e+1].w:C=s[e+1].y+(s[e+1].w-s[e+1].y)*P,D.push(s[e+1].x,C),D.push(s[e+1].z,C),d?C=j!==e?s[e+2].y:s[e+2].w:C=s[e+2].y+(s[e+2].w-s[e+2].y)*P,D.push(s[e+2].x,C),D.push(s[e+2].z,C),t&&(L.push(t[e+1].r,t[e+1].g,t[e+1].b,t[e+1].a),L.push(t[e+1].r,t[e+1].g,t[e+1].b,t[e+1].a),L.push(t[e+2].r,t[e+2].g,t[e+2].b,t[e+2].a),L.push(t[e+2].r,t[e+2].g,t[e+2].b,t[e+2].a))),j!==e&&(j=e)}const T=S!==1&&x?i+4:i;for(c=0,e=0;e<h;e++){let b=0,w=0,v=0,A=0;for(m=0;m<i;m++)b=c*(T+1)+m,w=(c+1)*(T+1)+m,v=c*(T+1)+(m+1),A=(c+1)*(T+1)+(m+1),f.push(b,w,v),f.push(A,v,w);S!==1&&x&&(f.push(b+2,w+2,v+2),f.push(A+2,v+2,w+2),f.push(b+4,w+4,v+4),f.push(A+4,v+4,w+4)),c=d?c+2:c+1}const X=b=>{const w=b?u/2:a/2;if(w===0)return;let v,A,z;const g=b?s[R-1]:s[0];let _=null;t&&(_=b?t[R-1]:t[0]);const E=$.length/3,ee=b?r/2:-r/2,Y=new k(0,ee,0);$.push(Y.x,Y.y,Y.z),y.push(0,b?1:-1,0);const fe=g.y+(g.w-g.y)*.5;D.push(g.x+(g.z-g.x)*.5,fe),_&&L.push(_.r,_.g,_.b,_.a);const te=new ae(.5,.5);for(z=0;z<=i;z++){v=Math.PI*2*z*S/i;const ne=Math.cos(-v),se=Math.sin(-v);A=new k(ne*w,ee,se*w);const ie=new ae(ne*te.x+.5,se*te.y+.5);$.push(A.x,A.y,A.z),y.push(0,b?1:-1,0);const pe=g.y+(g.w-g.y)*ie.y;D.push(g.x+(g.z-g.x)*ie.x,pe),_&&L.push(_.r,_.g,_.b,_.a)}for(z=0;z<i;z++)b?(f.push(E),f.push(E+(z+2)),f.push(E+(z+1))):(f.push(E),f.push(E+(z+1)),f.push(E+(z+2)))};(F===M.CAP_START||F===M.CAP_ALL)&&X(!1),(F===M.CAP_END||F===M.CAP_ALL)&&X(!0),I._ComputeSides(J,$,f,y,D,n.frontUVs,n.backUVs);const U=new I;return U.indices=f,U.positions=$,U.normals=y,U.uvs=D,t&&(U.colors=L),U}function le(n,r={},u){const a=new M(n,u);return r.sideOrientation=M._GetDefaultSideOrientation(r.sideOrientation),a._originalBuilderSideOrientation=r.sideOrientation,oe(r).applyToMesh(a,r.updatable),a}I.CreateCylinder=oe;M.CreateCylinder=(n,r,u,a,i,h,d,x,F)=>((d===void 0||!(d instanceof _e))&&(d!==void 0&&(F=x||M.DEFAULTSIDE,x=d),d=h,h=1),le(n,{height:r,diameterTop:u,diameterBottom:a,tessellation:i,subdivisions:h,sideOrientation:F,updatable:x},d));function G(n,r){let u=ye(r,"mesh",15),a=he(r,["$$slots","$$events","$$legacy","mesh"]);Se(n,me({createMeshFunction:le},()=>a,{get mesh(){return u()},set mesh(i){u(i)}}))}G.__docgen={data:[{name:"options",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"object",text:"{ arc?: number | undefined; backUVs?: Vector4 | undefined; cap?: number | undefined; diameter?: number | undefined; diameterBottom?: number | undefined; diameterTop?: number | undefined; ... 9 more ...; updatable?: boolean | undefined; }"},static:!1,readonly:!1},{name:"scene",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"object",text:"Scene"},static:!1,readonly:!1},{name:"mesh",visibility:"public",description:"if you want to use a mesh api, bind it",keywords:[],kind:"let",type:{kind:"type",type:"object",text:"Mesh"},static:!1,readonly:!1,defaultValue:"..."},{name:"position",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"object",text:"{ x: number; y: number; z: number; }"},static:!1,readonly:!1},{name:"rotation",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"object",text:"{ x: number; y: number; z: number; }"},static:!1,readonly:!1},{name:"scaling",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"object",text:"{ x: number; y: number; z: number; }"},static:!1,readonly:!1}],name:"Cylinder.svelte"};const Ee={title:"mesh/Cylinder",tags:["autodocs"],component:G},{Story:Oe}=Ae();var je=xe("<!> <!> <!>",1);function de(n,r){Ce(r,!1),be(),Oe(n,{name:"Docs",args:{options:{arc:void 0,backUVs:void 0,cap:void 0,diameter:4,diameterBottom:void 0,diameterTop:void 0,enclose:void 0,faceColors:void 0,faceUV:void 0,frontUVs:void 0,hasRings:void 0,height:4,sideOrientation:void 0,subdivisions:void 0,tessellation:void 0,updatable:void 0},position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scaling:{x:1,y:1,z:1}},children:(a,i=ze)=>{Me(a,{style:"width: 100%;",children:(h,d)=>{Fe(h,{children:(x,F)=>{Le(x,{children:(S,J)=>{var s=je(),t=ve(s);Pe(t,{position:new k(0,5,-10)});var N=re(t,2);Ue(N,{direction:new k(0,1,0),intensity:.7});var Z=re(N,2);G(Z,{get options(){return i().options},get position(){return i().position},get rotation(){return i().rotation},get scaling(){return i().scaling}}),ge(S,s)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0},parameters:{__svelteCsf:{rawCode:`<Canvas style="width: 100%;">
  <Engine>
    <Scene>
      <FreeCamera position={new Vector3(0, 5, -10)} />
      <HemisphericLight direction={new Vector3(0, 1, 0)} intensity={0.7} />
      <Cylinder
        options={args.options}
        position={args.position}
        rotation={args.rotation}
        scaling={args.scaling}
      />
    </Scene>
  </Engine>
</Canvas>`}}}),we()}de.__docgen={version:3,name:"Cylinder.stories.svelte",data:[],computed:[],methods:[],components:[],description:null,keywords:[],events:[],slots:[],refs:[]};const Ne=De(de,Ee),Ge=["Docs"],Je=Ne.Docs;export{Je as Docs,Ge as __namedExportsOrder,Ee as default};
