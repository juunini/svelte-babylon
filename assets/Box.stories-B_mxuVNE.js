import{p as M,s as I,r as L,i as P,a as H,t as T}from"./props-D_CwaEcb.js";import{p as q,a as G,f as R,b as J,n as K,c as D,d as N}from"./index-client-a4XWVA08.js";import{f as y,M as B,d as g,j as A,k as Q,l as W,m as X,n as Y,o as Z,p as ee,F as te,V as S,H as ne}from"./create-runtime-stories-BWJ8FmbH.js";import"./groundBuilder-GqLu9Y5v.js";import"./iframe-vcUCgR62.js";import"../sb-preview/runtime.js";import"./index-D-8MO0q_.js";import"./index-BHYIh-Xd.js";import"./_commonjsHelpers-Cpj98o6Y.js";function F(n){let s=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23];const i=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0],t=[];let u=[];const $=n.width||n.size||1,_=n.height||n.size||1,O=n.depth||n.size||1,C=n.wrap||!1;let h=n.topBaseAt===void 0?1:n.topBaseAt,m=n.bottomBaseAt===void 0?0:n.bottomBaseAt;h=(h+4)%4,m=(m+4)%4;const V=[2,0,3,1],w=[2,0,1,3];let x=V[h],U=w[m],f=[1,-1,1,-1,-1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,1,-1,1,-1,-1,1,-1,1,1,1,1,-1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,1,-1,1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,-1,-1,-1,1];if(C){s=[2,3,0,2,0,1,4,5,6,4,6,7,9,10,11,9,11,8,12,14,15,12,13,14],f=[-1,1,1,1,1,1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,1,1,1,1,-1,1,-1,-1,1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,-1,-1,-1];let e=[[1,1,1],[-1,1,1],[-1,1,-1],[1,1,-1]],c=[[-1,-1,1],[1,-1,1],[1,-1,-1],[-1,-1,-1]];const d=[17,18,19,16],p=[22,23,20,21];for(;x>0;)e.unshift(e.pop()),d.unshift(d.pop()),x--;for(;U>0;)c.unshift(c.pop()),p.unshift(p.pop()),U--;e=e.flat(),c=c.flat(),f=f.concat(e).concat(c),s.push(d[0],d[2],d[3],d[0],d[1],d[2]),s.push(p[0],p[2],p[3],p[0],p[1],p[2])}const k=[$/2,_/2,O/2];u=f.reduce((e,c,d)=>e.concat(c*k[d%3]),[]);const a=n.sideOrientation===0?0:n.sideOrientation||y.DEFAULTSIDE,r=n.faceUV||new Array(6),l=n.faceColors,v=[];for(let e=0;e<6;e++)r[e]===void 0&&(r[e]=new g(0,0,1,1)),l&&l[e]===void 0&&(l[e]=new A(1,1,1,1));for(let e=0;e<6;e++)if(t.push(r[e].z,r[e].w),t.push(r[e].x,r[e].w),t.push(r[e].x,r[e].y),t.push(r[e].z,r[e].y),l)for(let c=0;c<4;c++)v.push(l[e].r,l[e].g,l[e].b,l[e].a);y._ComputeSides(a,u,s,i,t,n.frontUVs,n.backUVs);const b=new y;if(b.indices=s,b.positions=u,b.normals=i,b.uvs=t,l){const e=a===y.DOUBLESIDE?v.concat(v):v;b.colors=e}return b}function E(n,o={},s=null){const i=new B(n,s);return o.sideOrientation=B._GetDefaultSideOrientation(o.sideOrientation),i._originalBuilderSideOrientation=o.sideOrientation,F(o).applyToMesh(i,o.updatable),i}y.CreateBox=F;B.CreateBox=(n,o,s=null,i,t)=>E(n,{size:o,sideOrientation:t,updatable:i},s);function z(n,o){let s=M(o,"mesh",15),i=L(o,["$$slots","$$events","$$legacy","mesh"]);Q(n,I({createMeshFunction:E},()=>i,{get mesh(){return s()},set mesh(t){s(t)}}))}z.__docgen={data:[{name:"options",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"object",text:"{ backUVs?: Vector4 | undefined; bottomBaseAt?: number | undefined; depth?: number | undefined; faceColors?: Color4[] | undefined; faceUV?: Vector4[] | undefined; ... 7 more ...; wrap?: boolean | undefined; }"},static:!1,readonly:!1},{name:"scene",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"object",text:"Scene"},static:!1,readonly:!1},{name:"children",visibility:"public",keywords:[],kind:"let",type:{kind:"function",text:"Snippet<[]>"},static:!1,readonly:!1},{name:"mesh",visibility:"public",description:"if you want to use a mesh api, bind it",keywords:[],kind:"let",type:{kind:"type",type:"object",text:"Mesh"},static:!1,readonly:!1,defaultValue:"..."},{name:"position",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"object",text:"{ x: number; y: number; z: number; }"},static:!1,readonly:!1},{name:"rotation",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"object",text:"{ x: number; y: number; z: number; }"},static:!1,readonly:!1},{name:"scaling",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"object",text:"{ x: number; y: number; z: number; }"},static:!1,readonly:!1}],name:"Box.svelte"};const oe={title:"mesh/Box",tags:["autodocs"],component:z},{Story:se}=X();var ie=T("<!> <!> <!>",1);function j(n,o){q(o,!1),P(),se(n,{name:"Docs",args:{options:{backUVs:{x:0,y:0,z:1,w:1},bottomBaseAt:void 0,depth:4,faceColors:[{r:1,g:1,b:1,a:1}],faceUV:[{x:0,y:0,z:1,w:1}],frontUVs:{x:0,y:0,z:1,w:1},height:4,sideOrientation:void 0,size:void 0,topBaseAt:void 0,updatable:void 0,width:4,wrap:void 0},position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scaling:{x:1,y:1,z:1}},children:(i,t=K)=>{Y(i,{style:"width: 100%;",children:(u,$)=>{Z(u,{children:(_,O)=>{ee(_,{children:(C,h)=>{var m=ie(),V=R(m);te(V,{position:new S(0,5,-10)});var w=D(V,2);ne(w,{direction:new S(0,1,0),intensity:.7});var x=D(w,2),U=N(()=>{var f,k;return{...t().options,faceUV:(f=t().options.faceUV)==null?void 0:f.map(a=>new g(a.x,a.y,a.z,a.w)),faceColors:(k=t().options.faceColors)==null?void 0:k.map(a=>new A(a.r,a.g,a.b,a.a)),frontUVs:t().options.frontUVs?new g(t().options.frontUVs.x,t().options.frontUVs.y,t().options.frontUVs.z,t().options.frontUVs.w):void 0,backUVs:t().options.backUVs?new g(t().options.backUVs.x,t().options.backUVs.y,t().options.backUVs.z,t().options.backUVs.w):void 0}});z(x,{get options(){return J(U)},get position(){return t().position},get rotation(){return t().rotation},get scaling(){return t().scaling}}),H(C,m)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0},parameters:{__svelteCsf:{rawCode:`<Canvas style="width: 100%;">
  <Engine>
    <Scene>
      <FreeCamera position={new Vector3(0, 5, -10)} />
      <HemisphericLight direction={new Vector3(0, 1, 0)} intensity={0.7} />
      <Box
        options={{
          ...args.options!,
          faceUV: args.options!.faceUV?.map((v) => new Vector4(v.x, v.y, v.z, v.w)),
          faceColors: args.options!.faceColors?.map((v) => new Color4(v.r, v.g, v.b, v.a)),
          frontUVs: args.options!.frontUVs
            ? new Vector4(
                args.options!.frontUVs.x,
                args.options!.frontUVs.y,
                args.options!.frontUVs.z,
                args.options!.frontUVs.w
              )
            : undefined,
          backUVs: args.options!.backUVs
            ? new Vector4(
                args.options!.backUVs.x,
                args.options!.backUVs.y,
                args.options!.backUVs.z,
                args.options!.backUVs.w
              )
            : undefined
        }}
        position={args.position}
        rotation={args.rotation}
        scaling={args.scaling}
      />
    </Scene>
  </Engine>
</Canvas>`}}}),G()}j.__docgen={version:3,name:"Box.stories.svelte",data:[],computed:[],methods:[],components:[],description:null,keywords:[],events:[],slots:[],refs:[]};const ae=W(j,oe),ye=["Docs"],he=ae.Docs;export{he as Docs,ye as __namedExportsOrder,oe as default};
